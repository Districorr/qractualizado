<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <!-- Ensure camera works on mobile devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Escáner de GS1 y Barras</title>
  <link rel="stylesheet" href="style.css">
</head>
<!-- Default to light mode -->
<body class="light">
  <div class="dark-mode-toggle">🌓</div>

  <h2 style="text-align:center">Escáner de GS1 y Barras</h2>
  <div class="tabs">
    <div class="tab active" data-tab-target="scan">📷 Escanear</div>
    <div class="tab" data-tab-target="records">📁 Registros</div>
  </div>

  <!-- Sección Escaner -->
  <div id="scan" class="section active">
    <select id="camera-selector" onchange="changeCamera(this.value)">
      <option value="">Seleccionar cámara...</option>
    </select>
    <!-- Container for the scanner preview -->
    <div id="scanner-preview"></div>
    <!-- Error message display -->
    <p id="camera-status" class="camera-error"></p>
    <p id="status">Esperando código...</p>
    <p><strong>Proveedor detectado:</strong> <span id="proveedor-auto">---</span></p>
    <p><strong>Resultado:</strong></p>
    <textarea id="resultado" rows="4" style="width:100%"></textarea>
    <!-- Optional: Container for captured image preview -->
    <div id="captura-container"></div>
  </div>

  <!-- Sección Registros anteriores (Placeholder) -->
  <div id="records" class="section">
    <h3>Buscar registros anteriores</h3>
    <p><i>(Funcionalidad de registros no implementada todavía)</i></p>
    <input type="text" placeholder="Buscar por lote, serie o proveedor..." style="width:100%;padding:0.5em" disabled>
    <div id="tabla-registros">(aquí aparecerá la tabla)</div>
  </div>

  <!-- Load Libraries FIRST -->
  <script src="html5-qrcode.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <!-- Load custom script AFTER libraries -->
  <script src="scanner.js"></script>
</body>
</html>
