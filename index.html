<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0077b6"/> <!-- Color para PWA -->
  <link rel="apple-touch-icon" href="icons/icon-192x192.png"> <!-- Icono para iOS -->

  <title>Esc치ner de GS1 y Barras</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="light">
  <!-- MODIFICADO: A침adido aria-label -->
  <div class="dark-mode-toggle" role="button" aria-label="Cambiar modo oscuro/claro" title="Cambiar modo oscuro/claro">游깹</div>

  <h2 style="text-align:center">Esc치ner de GS1 y Barras</h2>
  <div class="tabs">
    <div class="tab active" data-tab-target="scan" role="tab" aria-selected="true">游닝 Escanear</div>
    <div class="tab" data-tab-target="records" role="tab" aria-selected="false">游늬 Registros</div>
  </div>

  <!-- Secci칩n Escaner -->
  <div id="scan" class="section active" role="tabpanel">
    <!-- MODIFICADO: A침adido aria-label -->
    <select id="camera-selector" onchange="changeCamera(this.value)" aria-label="Seleccionar c치mara a usar">
      <option value="">Seleccionar c치mara...</option>
    </select>
    <div id="scanner-preview"></div>
    <p id="camera-status" class="camera-error" aria-live="polite"></p>
    <p id="status" aria-live="polite">Esperando c칩digo...</p>
    <p><strong>Proveedor detectado:</strong> <span id="proveedor-auto">---</span></p>
    <p><strong>Resultado Crudo:</strong></p>
    <!-- MODIFICADO: A침adido aria-label -->
    <textarea id="resultado" rows="4" aria-label="Resultado del escaneo"></textarea>
    <div class="action-buttons">
        <!-- MODIFICADO: A침adido aria-label -->
        <button id="copy-button" title="Copiar resultado" aria-label="Copiar resultado del escaneo al portapapeles">Copiar</button>
        <!-- MODIFICADO: A침adido aria-label -->
        <button id="clear-button" title="Limpiar resultado" aria-label="Limpiar resultados del escaneo">Limpiar</button>
    </div>

    <!-- NUEVO: Secci칩n para datos GS1 parseados -->
    <div id="gs1-parsed-data" class="gs1-data">
        <h4>Datos GS1 Interpretados:</h4>
        <div id="gs1-fields">
            <!-- Los campos se insertar치n aqu칤 din치micamente -->
        </div>
    </div>

    <div id="captura-container"></div>

    <div class="options">
        <label>
            <!-- MODIFICADO: A침adido aria-label -->
            <input type="checkbox" id="sound-toggle" checked aria-label="Activar o desactivar sonido al escanear">
            Reproducir sonido al escanear
        </label>
        <br>
        <label>
            <!-- MODIFICADO: A침adido aria-label -->
            <input type="checkbox" id="auto-clear-toggle" aria-label="Activar o desactivar limpieza autom치tica del resultado">
            Limpiar resultado autom치ticamente (tras 3 seg)
        </label>
    </div>
  </div>

  <!-- Secci칩n Registros anteriores (Placeholder) -->
  <div id="records" class="section" role="tabpanel">
    <h3>Buscar registros anteriores</h3>
    <p><i>(Funcionalidad de registros no implementada todav칤a)</i></p>
    <input type="text" placeholder="Buscar por lote, serie o proveedor..." disabled aria-label="Buscar en registros anteriores">
    <div id="tabla-registros">(aqu칤 aparecer치 la tabla)</div>
  </div>

  <!-- Cargar Librer칤as ANTES -->
  <script src="libs/html5-qrcode.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <!-- Cargar script custom DESPU칄S de librer칤as -->
  <script src="scanner.js"></script>
</body>
</html>
